<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <!-- 设置视口属性 -->
  <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <title>title</title>
  <!-- 导入 swiper的样式 -->
  <link rel="stylesheet" type="text/css" href="lib/swiper.min.css" />
  <link rel="stylesheet" type="text/css" href="css/index.css" />
</head>

<body>


  <!-- go页面  2-->
  <div class="go-layout">
    <!-- 云 -->
    <div class="clouds"></div>
    <!-- 草1 -->
    <div class="grass1"></div>
    <!-- 草2 -->
    <div class="grass2"></div>
    <!-- 按钮 -->
    <div class="btn-container">
      <div class="circle1"></div>
      <div class="circle2"></div>
    </div>
    <!-- 外卖之路 -->
    <div class="waimai-load">长按启动,等待送回家</div>
    <!-- 树 -->
    <div class="tree"></div>
    <!-- 标题 -->
    <div class="bear-title">
      <div class="bear-hello"></div>
    </div>
    <!-- 送外卖的熊 
       为了方便 设置动画 添加了一个 容器 来制作 从上往下的动画效果
    -->
    <div class="bear-box">
      <div class="bear">
      </div>
      <div class="smoke"></div>
    </div>
  </div>
  <!-- 加载页 1 -->
  <div class="loading-layout">
    <!--.rider+.progress>.step^+.info+.logo+.desc-->
    <div class="rider"></div>
    <div class="progress">
      <div class="step"></div>
    </div>
    <div class="info"></div>
    <div class="logo"></div>
    <div class="desc">
      @ 2017 Baidu WaiMai Produced
    </div>
  </div>
  <!-- 下面的轮播页面 我们使用 swiper来实现 -->
  <div class="waimai-container">
    <div class="swiper-wrapper">
      <div class="scroll-page1-layout swiper-slide">
        <!-- 标题 -->
        <div class="title">
          <h3>生活中,</h3>
          <p>经常有这种时候</p>
          <div class="line"></div>
        </div>
        <!-- 星球-->
        <div class="sphere"></div>
        <!-- 熊 -->
        <div class="bear"></div>
        <!-- 轮播的页面 -->
        <div class="page1" style='display:none'>
          <div class="bg"></div>
          <div class="person">
            <!--  设置文件 -->
            <div class="file">
              <!-- 纸张 -->
              <div class="page1"></div>
              <div class="page2"></div>
            </div>
          </div>
          <!-- 信息框 -->
          <div class="message-bg">
            <div class="message"></div>
          </div>
        </div>
        <!-- 轮播的页面2 -->
        <div class="page2" style='display:none'>
          <div class="bg"></div>
          <div class="person">
            <!-- 两条腿 -->
            <div class="leg1"></div>
            <div class="leg2"></div>
          </div>
          <!-- 信息框 -->
          <div class="message-bg">
            <div class="message"></div>
          </div>
        </div>
        <!-- 轮播的页面3 -->
        <div class="page3">
          <div class="bg"></div>
          <div class="person">
            <div class="message1"></div>
            <div class="message2"></div>
            <div class="message3"></div>
            <div class="message4"></div>
          </div>
          <!-- 信息框 -->
          <div class="message-bg">
            <div class="message"></div>
          </div>
        </div>
      </div>
      <!-- 轮播页面2 -->
      <div class="scroll-page2-layout swiper-slide">
        <!-- 标题 -->
        <div class="title">
          <h3>这个时候</h3>
          <p>如果给你送来了<br>一份好吃的东西..</p>
          <div class="line"></div>
        </div>
        <!-- 星球-->
        <div class="sphere"></div>
        <!-- 内容部分 -->
        <div class="content">
          <!-- 背景 -->
          <div class="bg"></div>
          <!-- 熊 -->
          <div class="bear">
            <!-- 左右手 -->
            <div class="hand1"></div>
            <div class="hand2"></div>
            <!-- 左右脸  -->
            <div class="face1"></div>
            <div class="face2"></div>
          </div>
          <div class="food"></div>
          <div class="table"></div>
        </div>
      </div>
      <div class="scroll-page3-layout swiper-slide">
        <!-- 标题 -->
        <div class="title">
          <h3>这个时候</h3>
          <p>如果有一份美味的西兰花<br>炒蛋就能够驱散热意</p>
          <div class="line"></div>
        </div>
        <!-- 星球-->
        <div class="sphere"></div>
        <!-- 内容部分 -->
        <div class="content">
          <!-- 背景 -->
          <div class="bg"></div>
          <!-- 熊 -->
          <div class="bear">
          </div>
          <div class="license"></div>
          <div class="oil"></div>
          <div class="evil"></div>
        </div>
      </div>
      <div class="scroll-page4-layout swiper-slide">
        <!-- 标题 -->
        <div class="title">
          <h3>百度外卖</h3>
          <p>比什么吗外卖要好<br>可以试试看</p>
          <div class="line"></div>
        </div>
        <!-- 星球-->
        <div class="sphere"></div>
        <!-- 内容部分 -->
        <div class="content">
          <!-- 背景 -->
          <div class="bg"></div>
          <!-- 熊 -->
          <div class="bear">
          </div>
          <div class="card1"></div>
          <div class="card2"></div>
          <div class="card3"></div>
        </div>
      </div>
      <div class="scroll-page5-layout swiper-slide">
        <!-- 标题 -->
        <div class="title">
          <h3>无论前方</h3>
          <p>下什么东西<br>我都会给你送过去的哦</p>
          <div class="line"></div>
        </div>
        <!-- 星球-->
        <div class="sphere"></div>
        <!-- 内容部分 -->
        <div class="content">
          <!-- 背景 -->
          <div class="bg"></div>
          <!-- 熊 -->
          <div class="bear">
            <div class="shadow"></div>
          </div>
          <!-- 云 -->
          <div class="cloud"></div>
        </div>
      </div>
      <div class="scroll-page6-layout swiper-slide">
        <!-- 标题 -->
        <div class="title">
          <h3>丰富礼物</h3>
          <p>买什么送什么<br>就问你怕不怕</p>
          <div class="line"></div>
        </div>
        <!-- 星球-->
        <div class="sphere"></div>
        <!-- 内容部分 -->
        <div class="content">
          <!-- 背景 -->
          <div class="bg"></div>
          <!-- 熊 -->
          <div class="bear">
          </div>
          <div class="gifts">
            <div><img src="images/page7/gift1.png" alt=""></div>
            <div><img src="images/page7/gift2.png" alt=""></div>
            <div><img src="images/page7/gift3.png" alt=""></div>
            <div><img src="images/page7/gift4.png" alt=""></div>
            <div><img src="images/page7/gift5.png" alt=""></div>
            <div><img src="images/page7/gift6.png" alt=""></div>
            <div><img src="images/page7/gift7.png" alt=""></div>
            <div><img src="images/page7/gift8.png" alt=""></div>
            <div><img src="images/page7/gift9.png" alt=""></div>
            <div><img src="images/page7/gift10.png" alt=""></div>
            <div><img src="images/page7/gift11.png" alt=""></div>
            <div><img src="images/page7/gift12.png" alt=""></div>
          </div>
        </div>
      </div>
      <div class="scroll-page7-layout swiper-slide">
        <!-- 标题 -->
        <div class="title">
          <h3>我这么努力</h3>
          <p>还是败给了你<br>亲，不要差评好不好</p>
          <div class="line"></div>
        </div>
        <!-- 星球-->
        <div class="sphere"></div>
        <!-- 内容部分 -->
        <div class="content">
          <!-- 背景 -->
          <div class="streetlight">
            <div class="lamplight"></div>
          </div>
          <!-- 熊 -->
          <div class="bear">
          </div>
          <div class="moto"></div>
          <div class="share"></div>
          <div class="url">waimai.baidu.com</div>
        </div>
      </div>
    </div>
  </div>
</body>

</html>

<!-- 导入 swiper的js -->
<script type="text/javascript" src="lib/swiper.min.js"></script>

<!-- 导入 zepto 使用zepto 来实现 dom元素操纵 -->
<script type="text/javascript" src="lib/zepto.js"></script>
<script type="text/javascript" src="lib/event.js"></script>
<script type="text/javascript" src="lib/fx.js"></script>
<script type="text/javascript" src="lib/touch.js"></script>
<!-- fadein toggle等 动画方法的模块 -->
<script type="text/javascript" src="lib/fx_methods.js"></script>


<!-- 调用swiper的方法 -->
<script type="text/javascript">
  var swiper = new Swiper('.waimai-container', {
  direction: 'vertical',
  // swiper的事件中 可以接受swiper作为参数
  onSlideChangeEnd: function (swiper) {
    // alert(swiper.activeIndex) //切换结束时，告诉我现在是第几个slide
    console.log(swiper.activeIndex);
    // 6.
    $('.swiper-slide').removeClass('animate');
    // 7为当前页添加animateclass
    $('.swiper-slide').eq(swiper.activeIndex).addClass('animate');
  }
  });

  /*
      1.页面打开之后 稍微等一会  播放 第一页的动画
      2.页面1动画播放完毕之后 开启第二页的动画
      2.1为了能够点击到 第二页 动画播放完毕之后 把第一页的display none
      3.页面2中 点击 按钮 让熊 往下 移动 变大 透明度变0
      4.页面2按钮点击之后 播放完毕之后 把第二页整个干掉
      5.第二个页面 隐藏之后 把 swiper中的 第一个页面的动画开启 animate -- jQuery部分
      6.swiper页面切换完毕之后 把swiper-slide的animateclass 全部都 删除 -swiper部分
      7.swiper页面切换完毕之后 把当前暂时的页面 添加animate class -swiper部分
  */
  $(function () {
    // 逻辑 1 2 2.1
    setTimeout(function () {
      $('.loading-layout').addClass('animate');
      // 有一个动画结束事件
      // dom元素 动画播放完毕之后 会调用一个 animationend事件
      // dom元素 过渡结束之后 会调用一个 transitionend事件
      // oninput $('input').on('input')
      // $('.loading-layout').transitionend(function(){})
      $('.loading-layout').on('transitionend', function () {
        console.log('end');
      })
      // 动画结束事件 在 动画播放完毕时 触发第二页的动画 
      $('.loading-layout .rider').on('animationend', function () {

        setTimeout(function () {
          $('.go-layout').addClass('animate');
          // console.log('rider-end');
          $('.loading-layout').css('display', 'none');
        }, 1000);
      })
    }, 1000)

    // 逻辑 3 4 5 绑定zepto 提供的长按事件
    $('.go-layout .btn-container').longTap(function () {
      // 3 移动熊 
      $('.bear-box').animate({
        transform: 'translateY(100%) scale(1.5,1.5)',
        opacity: 0
      }, 1000, function () {
        //  4 关闭页面2
        $('.go-layout').fadeOut(function () {
          // 把 go-layout的 diplay设置为none
          $(this).css('display', 'none');
          // 5 把swiper的第一个页面的动画开启
          $('.swiper-slide').first().addClass('animate');
        });
      })
    })
  })
</script>